# This program is part of the
 
     Revised Mathematisch Centrum Algol 68 Test Set

  by Dick Grune [1979].

  This program is distributed with Algol 68 Genie with
  kind permission of Dick Grune.

  This test set is available from:

     http://www.dickgrune.com/CS/Algol68

  or from the Vrije Universiteit Amsterdam:

     ftp://ftp.cs.vu.nl/pub/dick/Algol68/ #

PR quiet PR

#idef12#

# Priorities and weird constructions #
WHILE INT n := 0;
      
      OP + = (REF INT i, CHAR c) STRING: "ab";
      
      (WHILE DO GOTO skip
             OD;
             TRUE
       DO SKIP
       OD;
       PRIO + = 1;
       
       SKIP EXIT
       skid:
       (HEAP INT +:= 1 + "1" +=: (HEAP STRING := "c")) = "abc" EXIT
       skip: GOTO skid)
DO DO # The implicit structure of the formulas is
                  ( a O1 ( b + ( c O2 d)))
            which is only achieved if   pr(O1) < pr(+) < pr(O2)
          #
      PRIO + = 2;
      
      OP + = (INT i, BOOL b) STRING:
         (print ("corr");
          "ect,");
      
      OP + = (REAL x, BOOL b) BOOL:
         (print ("Line ");
          FALSE);
      
      OP + = (CHAR c, BOOL b) BOOL:
         (print ("two ");
          FALSE);
      
      OP + = (BITS b, INT i) STRING:
         (print ("one ");
          "Nope ");
      
      OP + = (REF BYTES b, REAL x) INT:
         (print ("is ");
          -(n +:= 1));
      
      OP + = (STRING s, COMPL c) BITS:
         (print ("sho");
          drop);
      
      print ((HEAP STRING +:= ABS IF PRIO + = 3;
                                     
                                     ODD n OR 2.0 + "a" = "b"
              THEN PRIO + = 4;
                   
                   TRUE AND "a" + 2 < 3
              ELSE PRIO + = 5;
                   
                   "prio" = 2r1 + 2 - 3
              FI + 
              # prio 2 #
              CASE PRIO + = 7;
                   
                   0 - LOC BYTES + 3.0 ** 5
              IN TRUE, FALSE
              OUT PRIO + = 8;
                  
                  3 ELEM "prio" + 2.0 I 3.0
              ESAC AND random < 0.5, newline))
   OD EXIT
   drop:
   print (("rter than line three.", newline, "End of test"));
   stop
OD