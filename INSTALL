ALGOL68G - ALGOL 68 GENIE (MARK 9.X)
------------------------------------

Algol68G is free software distributed under GNU GPL. This software is 
distributed in the hope that it will be useful, but without any warranty. 
The author of this software does not accept responsibility to anyone for the 
consequences of using it or for whether it serves any particular purpose or 
works at all. See the GNU General Public License for more details.


BUILDING ALGOL68G
-----------------

This page describes how to install Algol68G on GNU/Linux. The procedure 
should work equally well on related operating systems as Unix, FreeBSD or 
MacOS X.


A. GENERIC INSTALLATION
-----------------------

* If available on your system, Algol68G links to GNU plotutils (version 2.5 or 
compatible).

* If available on your system, Algol68G links to GNU scientific library 
(version 1.8 or compatible).  

* If available on your system, Algol68G links to glibc POSIX threads. 
  You need to specify when configuring that you wish to use POSIX threads - 
  see instructions below.

* If available on your system, Algol68G links to the curses library.

* If available on your system, Algol68G links to the PostgreSQL library 
(version 8.1.4 or compatible).

The 'configure' script checks your system for shared libraries and necessary 
includes. If necessary files are not detected then Algol68G builds without 
support for absent libraries.

For a generic installation, follow next instructions.

(A.1)  Make the distribution directory the present working directory using the
       'cd' command.

(A.2)  In the distribution directory type 

	      ./configure

       This will generate a makefile. The configure script accepts various
       options. For an overview of options, type

	      ./configure -h

       Note that various options for optimisation, debugging and profiling
       assume you are using gcc, gdb and gprof.
 
       If you are interested in Algol68G's parallel clause, you need to 
       build using POSIX threads. To build with POSIX threads, type

	      ./configure --threads

(A.3)  Type 

	      make depend

       This will register dependencies needed to build Algol68G.

(A.4a) If you do not want to install Algol68G for all users, type 

	      make all

       The executable 'a68g' will be put in the present working directory.

       (The standard makefile will turn warnings off in case gcc is used.
       If you do not use gcc, or make gcc issue warnings, it is possible 
       that your C compiler will issue spurious warnings on source files
       suggesting that some variables might be clobbered by 'longjmp' or
       'vfork'. For some reason data path analysis in such compiler cannot 
       see that the code is safe since these variables are declared 'volatile'.
       There is no risk of clobbering, and therefore such warning messages 
       can be safely ignored.)

(A.4b) If you want to install Algol68G for all users to use, type 

	      make install

       to make available the executable and a manual page.
       Targets for those files are '/usr/local/bin' and '/usr/local/man'. 
       If latter directory does not exist, '/usr/share/man' and then '/usr/man' 
       are tried.

       Installation can be undone by typing

	      make uninstall

(A.4d) Note that in (A.4a,b,c) you can supply CPPFLAGS, CFLAGS and LDFLAGS;
       for instance type 

	      make all CFLAGS='-O' 

       to optimise the code.

(A.5)  Type 

	      make clean 

       to remove binaries used for building Algol68G. As to remove all files 
       used for installation, type 

	      make distclean


B. CUSTOMISED INSTALLATION
--------------------------

For a customised installation some configuration is required, that cannot be 
reliably automated. Configuration switches in file 'source/config.h' are 
set to default values that should work on Linux and FreeBSD in a generic 
installation. Notable options in 'source/config.h' are listed below.

(B.1)  If you want the interpreter to check system stack size then define
       DO_SYSTEM_STACK_CHECK in file 'config.h'. This check assumes that 
       the stack grows linearly (either upwards or downwards) and that the 
       difference between (1) the address of a local variable in the current 
       stack frame and (2) the address of a local variable in a stack frame 
       at the start of execution of the Algol 68 program, is a measure of 
       system stack size.
   
(B.2)  If you have GNU plotutils on your system, you may define 
       HAVE_MODIFIABLE_X_TITLE in file 'config.h' if you have modifiable 
       titles for X windows. Since GNU plotutils routines do not allow changing 
       X window names, a trivial adaptation is required of plotutils source
       file 'y_openpl.c'. This modified file comes with the Algol68G
       distribution (in directory 'foreign') and can be used to rebuild 
       GNU plotutils.

(B.3)  Follow instructions as for 'generic installation'.
