# This program is part of the Revised Mathematisch Centrum Algol 68 Test Set
  by Dick Grune [1979].

  This program is distributed with Algol 68 Genie with
  kind permission of Dick Grune.'

  These test sets are available from:
     www.dickgrune.com/CS/Algol68
  or from the Vrije Universiteit Amsterdam:
     ftp://ftp.cs.vu.nl/pub/dick/Algol68/ #

PR quiet PR

#garb03#
BEGIN # Test garbage collector #
      INT size = 250;
      
      REF [] REAL x,
      [1 : size] REF [] REAL y,
      INT n := 1;
      
      l: x := HEAP [1 : n] REAL;
      # to throw away # y[n] := HEAP [1 : 10] REAL;
      # to be kept #
      FOR k TO 10 
      DO y[n][k] := 10 * n + k - 11
      OD;
      FOR m TO n 
      DO FOR k TO 10 
         DO IF y[m][k] /= 10 * m + k - 11
            THEN print ((newline, "Error in element", m, k, "value is", y[m][k], " should be", 10 * m + k - 11, new line, "after", collections, " garbage collections"))
            FI
         OD
      OD;
      IF (n +:= 1) LE size
      THEN l
      FI;
      print (("collections, garbage, collect seconds:", newline));
      print ((collections, garbage, collect seconds, newline))
END