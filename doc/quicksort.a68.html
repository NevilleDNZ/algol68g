<!-- Header -->
<html>
<head>
<title>Algol 68 Genie</title>
<meta name="Keywords" content="algol,algol68,68,algol-68,algol68g,algol68-g,a68g,a68-g,68g,genie,interpreter">
<meta http-equiv="Content-Style-Type" content="text/css"; charset=ISO-8859-1">
<style type="text/css">
a:link    {color: blue; text-decoration: underline;}
a:visited {color: blue; text-decoration: underline;}
a:active  {color: blue; text-decoration: underline;}
p {font-size: 10pt; font-family: arial, sans-serif;}
u {font-size: 10pt; font-family: arial, sans-serif;}
dd {font-size: 10pt; font-family: arial, sans-serif;}
h1 {font-size: 14pt; font-family: arial, sans-serif;}
h2 {font-size: 12pt; font-family: arial, sans-serif;}
h3 {font-size: 10pt; font-family: arial, sans-serif;}
h4 {font-size: 10pt; font-family: arial, sans-serif;}
td {font-size: 10pt; font-family: arial, sans-serif;}
ul {font-size: 10pt; font-family: arial, sans-serif;}
body {font-size: 10pt; font-family: arial, sans-serif;}
tt {font-size: 10pt; font-family: "courier new", monospace;}
code {font-size: 10pt; font-family: "courier new", monospace;}
pre {font-size: 10pt; font-family: "courier new", monospace;}
</style>
</head>

<body bgcolor="white">

<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="100%" background="lines.gif">
<img src="lines.gif" align=right>
<small>
<b>Documentation for Algol 68 Genie Mark 11.1</b>
</small>
</td>
</table>


<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="50%" valign=top bgcolor="white">
<br>
<h2>Example: Quicksort</h2>
</td>
<td width="30%" valign=top bgcolor="white">
<img src="algol68.gif">
</td>
<td width="5%" valign=top bgcolor="white">
</td>
<td width="15%" valign=top bgcolor="white">
<!-- Navigation bar -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td background="lines.gif">
<p>
<a href="algol.html"><small><b>A68G Home</b></small></a>
<p>
<a href="contents.html"><small><b>Documentation</b></small></a><br>
<p>
<a href="report_contents.html"><small><b>Revised Report</b></small></a>
<p>
<a href="algol.html#obtaining"><small><b>Downloads</b></small></a>
</td>
</tr>
</table>
<!-- End navigation bar -->
</td>
</table>

<pre>
BEGIN MODE NODE = STRUCT (INT k, TREE smaller, larger),
           TREE = REF NODE;

      TREE empty tree = NIL;

      PROC add = (REF TREE root, INT k) VOID:
           IF root IS empty tree
           THEN root := HEAP NODE := (k, NIL, NIL)
           ELSE add ((k < k OF root | smaller OF root | larger OF root), k)
           FI;

      PROC write = (TREE root) VOID:
           IF root ISNT NIL
           THEN write (smaller OF root);
                print ((whole (k OF root, 0), " "));
                write (larger OF root)
           FI;

      TREE root := empty tree;
      WHILE INT n = read int;
            n > 0
      DO add (root, n)
      OD;
      write (root)
END
</pre>
<p>
Compare the version above with next version, which is the so-called "triple-REF trick": 
<p>
<pre>
MODE NODE = STRUCT (INT v, REF NODE less, more);
REF NODE end = NIL;
REF REF NODE start = LOC REF NODE := end;

PROC insert = (INT v) VOID:
     BEGIN REF REF REF NODE place = LOC REF REF NODE := start;
           WHILE place ISNT end
           DO place := (v < v OF place | less OF place | more OF place)
           OD;
           REF REF NODE (place) := HEAP NODE := (v, end, end)
     END;

PROC print tree = (REF NODE n) VOID:
     IF n ISNT NIL
     THEN print tree (less OF n);
          print ((new line, whole (v OF n, 0)));
          print tree (more OF n)
     FI;

WHILE INT n = read int;
      n > 0
DO insert (n)
OD;

print tree (start)
</pre>

<!-- Footer -->
<p>
<div style="border: 1px solid red">
<table cellpadding=6>
<tr>
<td>
<small>
Copyright &copy; 2001-2008 J. Marcel van der Veer.<br>
Algol 68 Genie Mark 11.1 (March 2008)
</small>
</td>
</tr>
</table>
</div>
</body>
</html>

