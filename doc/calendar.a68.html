<!-- Header -->
<html>
<head>
<title>Algol 68 Genie</title>
<meta name="Keywords" content="algol,algol68,68,algol-68,algol68g,algol68-g,a68g,a68-g,68g,genie,interpreter">
<meta http-equiv="Content-Style-Type" content="text/css"; charset=ISO-8859-1">
<style type="text/css">
a:link    {color: blue; text-decoration: underline;}
a:visited {color: blue; text-decoration: underline;}
a:active  {color: blue; text-decoration: underline;}
p {font-size: 10pt; font-family: Arial,Helvetica;}
u {font-size: 10pt; font-family: Arial,Helvetica;}
dd {font-size: 10pt; font-family: Arial,Helvetica;}
h1 {font-size: 16pt; font-family: Arial,Helvetica;}
h2 {font-size: 14pt; font-family: Arial,Helvetica;}
h3 {font-size: 12pt; font-family: Arial,Helvetica;}
h4 {font-size: 10pt; font-family: Arial,Helvetica;}
td {font-size: 10pt; font-family: Arial,Helvetica;}
ul {font-size: 10pt; font-family: Arial,Helvetica;}
body {font-size: 10pt; font-family: Arial,Helvetica;}
code {font-size: 10pt; font-family: Courier;}
pre {font-size: 10pt; font-family: Courier;}
</style>
</head>

<body bgcolor="white">

<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="100%" background="lines.gif">
<img src="lines.gif" align=right>
<small>
Documentation for Algol 68 Genie Mark 11
</small>
</td>
</table>


<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="50%" valign=top bgcolor="white">
<br>
<h2>Example: Calendar</h2>
</td>
<td width="30%" valign=top bgcolor="white">
<img src="algol68.gif">
</td>
<td width="5%" valign=top bgcolor="white">
</td>
<td width="15%" valign=top bgcolor="white">
<!-- Navigation bar -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td background="lines.gif">
<b>Algol68G Mark 11</b>
<p>
&nbsp;&middot;&nbsp;<a href="contents.html"><small><b>Contents</b></small></a><br>
<p>
&nbsp;&middot;&nbsp;<a href="algol.html"><small>Introduction</small></a><br>
&nbsp;&middot;&nbsp;<a href="install.html"><small>Installation</small></a><br>
&nbsp;&middot;&nbsp;<a href="description.html"><small>Description</small></a><br>
&nbsp;&middot;&nbsp;<a href="examples.html"><small>Example&nbsp;programs</small></a><br>
&nbsp;&middot;&nbsp;<a href="synopsis.html"><small>Synopsis</small></a><br>
&nbsp;&middot;&nbsp;<a href="syntax.html"><small>Syntax</small></a><br>
<p>
&nbsp;&middot;&nbsp;<a href="resources.html"><small>A68 Resources</small></a><br>
&nbsp;&middot;&nbsp;<a href="algol.html#obtaining"><small>Downloads</small></a><br>
&nbsp;&middot;&nbsp;<a href="algol.html#contact"><small>Contact</small></a><br>
</td>
</tr>
</table>
<!-- End navigation bar -->
</td>
</table>

<pre>
PROC weekday = (INT year, month, day) INT:
     # Day of the week by Zeller's Congruence algorithm from 1887 #
     BEGIN INT y := year, m := month, d := day, c;
           IF m <= 2
           THEN m +:= 12;
                y -:= 1
           FI;
           c := y OVER 100; 
           y %*:= 100;
           (d + ((m + 1) * 26) OVER 10 + y + y OVER 4 + c OVER 4 - 2 * c) MOD 7
     END;

# Print a calendar for this year #

INT year = utc time[1];
FOR month TO 12
DO # Assign day numbers to weekdays in this month #
   INT days = (month | 31, 28 + (year MOD 4 = 0 AND year MOD 400 /= 0 | 1 | 0), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
   [1 : days + 7] STRING s;
   FOR k TO UPB s 
   DO s[k] := 3 * blank 
   OD;
   FOR k TO days 
   DO s[weekday (year, month, 1) + k] := whole (k, -3)
   OD;
   # Print this month #
   on format error (standout, (REF FILE f) BOOL: continue);
   print f (($llc("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")xg(0)l"Sat Sun Mon Tue Wed Thu Fri"$, month, year));
   printf (($l7(aaax)$, s));
   continue: SKIP
OD
</pre>

<!-- Footer -->
<hr color=#e0e0e0>
<p>
<small>
Copyright &copy; 2001-2007 J. Marcel van der Veer.<br>
Algol 68 Genie Mark 11 (November 2007)
</small>
</p>
<hr color=#e0e0e0>

</body>
</html>

