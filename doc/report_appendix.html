<!-- RRHeader -->
<html>
<head>
<title>Revised Report on the Algorithmic Language Algol 68 - Algol 68 Genie</title>
<meta name="Keywords" content="algol,algol68,68,algol-68,algol68g,algol68-g,a68g,a68-g,68g,genie,interpreter">
<meta http-equiv="Content-Style-Type" content="text/css"; charset=ISO-8859-1">
<style type="text/css">
a:link    {color: blue; text-decoration: underline;}
a:visited {color: blue; text-decoration: underline;}
a:active  {color: blue; text-decoration: underline;}
p {font-size: 10pt; font-family: arial, sans-serif;}
u {font-size: 10pt; font-family: arial, sans-serif;}
dd {font-size: 10pt; font-family: arial, sans-serif;}
h1 {font-size: 14pt; font-family: arial, sans-serif;}
h2 {font-size: 12pt; font-family: arial, sans-serif;}
h3 {font-size: 10pt; font-family: arial, sans-serif;}
h4 {font-size: 10pt; font-family: arial, sans-serif;}
td {font-size: 10pt; font-family: arial, sans-serif;}
ul {font-size: 10pt; font-family: arial, sans-serif;}
body {font-size: 10pt; font-family: arial, sans-serif;}
tt {font-size: 10pt; font-family: "courier new", monospace;}
code {font-size: 10pt; font-family: "courier new", monospace;}
var {font-size: 10pt; font-weight: normal; font-style: normal; font-family: "courier new", monospace; color: darkred;}
pre {font-size: 10pt; font-family: "courier new", monospace;}
</style>
</head>

<body bgcolor="white">

<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="100%" background="lines.gif">
<img src="lines.gif" align=right>
<small>
<b>Revised Report on the Algorithmic Language Algol 68</b>
</small>
</td>
</table>


<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="50%" valign=top bgcolor="white">
<br>
<h2>
Algol 68 Revised Report
</h2>
<h2>
Appendix
</h2>
</td>
<td width="30%" bgcolor="white" valign=top align=center>
<img src="algol68.gif" align=center>
</td>
<td width="5%" valign=top bgcolor="white">
</td>
<td width="15%" valign=top bgcolor="white">
<!-- Navigation bar -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td background="lines.gif">
<p>
<a href="algol.html"><small><b>A68G Home</b></small></a>
<p>
<a href="report_contents.html"><small><b>Revised Report</b></small></a>
<p>
<a href="algol.html#obtaining"><small><b>Downloads</b></small></a>
</td>
</tr>
</table>
<!-- End navigation bar -->
</td>
</table>  

<h3>
<a name=E></a>Appendix. Specification of partial parametrization proposal
</h3>

<h3>
by C.H. Lindsey (University of Manchester)  
</h3>

<p>
{This appendix is not a part of the Algol 68 Revised Report, and is reproduced with kind permission of C.H. Lindsey.<br>
 Original publication <i>Algol Bulletin 39.3.1 pages 6-9</i>.}

<p>
The following specification has been released by the IFIP Working Group 2.1 Standing subcommittee on ALGOL 68 Support, with the authorization of the Working Group. This proposal has been scrutinized to ensure that  

<ol type=a>
<li> it is strictly upwards-compatible with ALGOL 68,<br>
<li> it is consistent with the philosophy and orthogonal framework of that language, and <br>
<li> it fills a clearly discernible gap in the expressive power of that language. 
</ol>

<p>
In releasing this extension, the intention is to encourage implementers experimenting with features similar to those described below to use the formulation here given, so as to avoid proliferation of dialects.  

<p>
{ {Although routines are values in ALGOL 68, and can therefore be yielded by other routines, the practical usefulness of this facility is limited by scope restrictions. Consider:  

<pre>
PROC f = (REAL x) PROC (REAL) REAL: (REAL y) REAL: x + y;
PROC (REAL) REAL g := f (3);
x := g (4)
</pre>  

<p>
This attempts to assign to <tt>g</tt> the routine "add 3". It does not work because the body of the routine is still fundamentally the <b>routine-text</b><tt> (REAL y) REAL : x + y</tt> which expects to find the value <tt>x</tt> (i.e. <i>3</i>) on the stack in the form of an actual-parameter of <tt>f</tt>, and by this time <tt>f</tt> is finished with and its stack level has disappeared. The problem arises whenever a <b>routine-text</b> uses identifiers declared globally to itself and the limitation is expressed in the Report by making the scope of a routine dependent on its necessary environ (<a href="report_3.html#722c">7.2.2.c</a>). Here is an attempt at functional composition which fails to work for the same reason:  

<pre>
PROC compose = (PROC (REAL) REAL f, g) PROC (REAL) REAL: (REAL x) REAL:  f (g (x));  
PROC (REAL) REAL sex = compose (sqrt, exp)
</pre>  

<p>
Clearly, if the restriction is to be lifted, a routine value has to have associated with it copies of these global values. Unfortunately, their number is in general indeterminable at compile time, and so the implementation of such values must be similar to that of multiple values referred to by flexible names (<a href="report_1.html#2134f">2.1.3.4.f</a>) requiring, in most implementations, the use of the heap.  

<p>
In this variant, all the intended global values appear to the <b>routine-text</b> as its own formal-parameters. At each call, some or all of these parameters are provided with actual values, resulting in a routine with that number of parameters fewer. Ultimately (possibly after several calls) a routine without parameters is obtained and, if the context so demands, deproceduring can now take place. Thus, all calls in the original language turn out to be parametrizations followed by immediate deproceduring, but their effect is the same. Here are some examples:  

<pre>
1) PROC f = (REAL x, y) x + y; PROC (REAL) REAL g := f (3, ); x := g (4) #  or x := f (3, ) (4) #
</pre>  

<pre>
2) PROC compose = (PROC (REAL) REAL f, g, REAL x) REAL; f (g (x)); 
PROC (REAL) REAL sex = compose (sqrt, exp, )
</pre>  

<pre>
3) OP &uarr; = (PROC (REAL) REAL a, INT b) PROC (REAL) REAL:
     ( (PROC (REAL) REAL a, INT b, REAL p) REAL:
        (REAL x := 1; TO b DO x *:= a (p) OD; x )) (a, b, );
   REAL theta; print ( (cos &uarr; 2) (theta) + (sin &uarr; 2) (theta))
</pre>}}  

<p>
{ {A routine now includes an extra locale.}}  

<h3>
<a name=EA1></a>2.1.3.5. Routines
</h3>

<p>
<a name=E2135a></a>a) A "routine" is a value composed of a <b>routine-text</b> {<a href="report_2.html#5411a">5.4.1.1.a,b</a>}, an environ {<a href="report_1.html#2111c">2.1.1.1.c</a>} and a locale {<a href="report_1.html#2111b">2.1.1.1.b</a>}.  {The locale corresponds to a <b>'DECSETY'</b> reflecting the formal-parameters, if any, of the <b>routine-text</b>.}
<br>
<a name=E2135b></a>b) The mode of a routine is some <b>'PROCEDURE'</b>. 
<br>
<a name=E2135c></a>c) The scope of a routine is the newest of the scopes of its environ and of the values, if any, accessed {<a href="report_1.html#212c">2.1.2.c</a>} inside its locale.  

<p>
{ {A <b>routine-text</b> yields the new style of routine.}}  

<h3>
<a name=EA2></a>5.4.1.2. Semantics
</h3>

<p>
The yield of a <b>routine-text</b>  <i>T</i>, in an environ <i>E</i>, is the routine composed of  
<OL type=i>  
<li><i>T</i>,
<li>the environ necessary for {<a href="report_3.html#722c">7.2.2.c</a>} <i>T</i> in <i>E</i>, and
<li>a locale corresponding to <b>'DECS2'</b> if <i>T</i> has a <b>declarative-defining-new-DECS2-brief-pack</b>, and to <b>'EMPTY'</b> otherwise. 
</ol>

<p>
{ {Most of the remaining changes to the Report needed to incorporate this facility are in section <a href="report_2.html#543">5.4.3</a> (calls).}}  

<h3>
<a name=EA3></a>5.4.3. Calls (with partial parametrization)
</h3>

<p>
{A <b>call</b> is used to provide <b>actual-parameters</b> to match some or all of the <b>formal-parameters</b> of a routine. It yields a routine with correspondingly fewer <b>formal-parameters</b> or with none at all, in which case the yield is usually subject to deproceduring (<a href="report_3.html#63">6.3</a>).  

<p>
{Examples:
<pre>
y := sin (x) &bull; 
PROC REAL ncossini = (p | ncos | nsin) (i) &bull;  
print ( (set char number ( ,  5), x)).}
</pre>}

<h3>
<a name=E5431></a>5.4.3.1 Syntax
</h3>

<a name=E5431A></a>

A) <b>PARAMSETY ::  PARAMETERS ; EMPTY.</b> 

<p>
<a name=E5431a></a>a) <b>procedure yielding MOID NEST call</b> {<a href="report_2.html#51D">5D</a> } <b>:  meek procedure with PARAMETERS1 yielding MOID NEST PRIMARY</b> {<a href="report_2.html#51D">5D</a> } <b>, actual NEST PARAMETERS1 leaving EMPTY</b> {c,d,e}<b>brief pack.</b> 
<br>
<a name=E5431b></a>b) <b>procedure with PARAMETERS2 yielding MOID NEST call</b> {<a href="report_2.html#51D">5D</a> } <b>:  meek procedure with PARAMETERS1 yielding MOID NEST PRIMARY</b> {<a href="report_2.html#51D">5D</a> } <b>, actual NEST PARAMETERS1 leaving PARAMETERS2</b> {c,d,e,f}<b>brief pack.</b> 
<br>
<a name=E5431c></a>c) <b>actual NEST PARAMETER PARAMETERS leaving PARAMSETY1 PARAMSETY2</b> {a,b,c}<b> : actual NEST PARAMETER leaving PARAMSETY1</b> {d,e}<b>, and also</b> {<a href="report_4.html#941f">94f</a> }  <b>token, actual NEST PARAMETERS leaving PARAMSETY2</b> {c,d,e}<b>.</b> 
<br>
<a name=E5431d></a>d) <b>actual NEST MODE parameter leaving EMPTY</b> {a,b,c}<b> : strong MODE NEST unit</b> {<a href="report_2.html#321d">32d</a> }  <b>.</b> 
<br>
<a name=E5431e></a>e) <b>actual NEST PARAMETER leaving PARAMETER</b> {a,b,c}<b> : EMPTY.</b> 
<br>
<a name=E5431f></a>f) <b>* actual MODE parameter : actual NEST MODE parameter leaving EMPTY</b> {d}<b>.</b> 
<br>
<a name=E5431g></a>g) <b>* dummy parameter : actual NEST PARAMETER leaving PARAMETER</b> {e}<b>.</b>

<p>
{Examples:  
<pre>
a) set char number (stand out, 5)      
b) set char number ( , 5)   
c) , 5
d) 5
</pre>}

<h3>
<a name=E4></a>5.4.3.2. Semantics
</h3>

<p>
<a name=E5432a1></a>a1) The yield <i>W</i> of a <b>call</b> <i>C</i>, in an environ <i>E</i>, is determined as follows:  
<br>
&bull; let <i>R</i> {a routine} and V<sub>1</sub>, ... , V<sub>n</sub> be the {collateral} yields of the <b>PRIMARY</b> of <i>C</i>, in <i>E</i>, and of the constituent <b>actual-</b> and <b>dummy-parameters</b> of <i>C</i>, in an environ <i>E1</i> established {locally, see <a href="report_2.html#322b">3.2.2.b</a>} around <i>E</i>, where the yield of a <b>dummy-parameter</b> is  "<i>absent</i>";  
<br>
&bull; <i>W</i> is {the routine which is} the yield of the "parametrization"  {a2} of <i>R</i> with V<sub>1</sub>, ... , V<sub>n</sub>;  
<br>
&bull; except where <i>C</i> is the constituent <b>call</b> of a <b>deprocedured-to-MOID-call</b> {<a href="report_3.html#631a">6.3.1.a</a>}, it is required that <i>W</i> be not newer in scope than <i>E</i> {; thus,  <tt>PROC (CHAR, STRING) BOOL cs = char in string ( , LOC INT, )</tt> is undefined but <tt>q := char in string ("A", LOC INT, s)</tt> is not}.  
<br>
<a name=E5432a2></a>a2) The yield <i>W</i> of the "parametrization" of a routine <i>R0</i> with values V<sub>1</sub>, ... , V<sub>n</sub> is determined as follows:  
<br>
&bull; let <i>T0</i>, <i>E0</i> and <i>L0</i> be, respectively, the <b>routine-text</b>, the environ and the locale of <i>R0</i>, and let <i>L0</i>  correspond {<a href="report_1.html#2111b">2.1.1.1.b</a>} to some <b>'DECS0'</b>;  
<br>
&bull; let <i>L1</i> be a new locale corresponding to <b>'DECS0'</b>, and let the value, if any, accessed by any <b>'DEC0'</b> inside <i>L0</i> be accessed also by that <b>'DEC0'</b> inside <i>L1</i>;  
<br>
&bull; let <b>'DECS1'</b> be a sequence composed of all those <b>'DEC0'</b>s enveloped by <b>'DECS0'</b> which have not {yet} been made to access values inside <i>L1</i>, taken in their order within <b>'DECS0'</b>; 
<br>
For i = 1, ... , n, If <i>V<sub>i</sub></i> is not <i>absent</i>, {see <a href="report_appendix.html#E5432a1">a1</a> }  , then the <i>i</i>-th <b>'DEC1'</b> enveloped by <b>'DECS1'</b> is made to access <i>V<sub>i</sub></i> inside <i>L1</i>; 
<br>
otherwise, the <i>i</i>-th <b>'DEC1'</b> still does not access anything;  
<br>
&bull; <i>W</i> is the routine composed of <i>T0</i>, <i>E0</i> and <i>L1</i>.  

<p>
{A routine may be parametrized in several stages. Upon each occasion the yields of the new <b>actual-parameters</b> are made to be accessed inside its locale and the scope of the routine becomes the newest of its original scope and the scopes of those yields.}

<p>
<a name=E5432b></a>b) The yield <i>W</i> of the "calling" of a routine <i>R0</i> in an environ <i>E1</i> {see 5.4.2.2 and 6.3.2} is determined as follows:  
<br>
&bull; let <i>T0</i>, <i>E0</i> and <i>L0</i> be, respectively, the <b>routine-text</b>, the environ and the locale of <i>R0</i>;  
<br>
&bull; let <i>E2</i> be a {newly established} environ, newer in scope than <i>E1</i>, composed of <i>E0</i> and <i>L0</i> {<i>E2</i> is local};  
<br>
&bull; <i>W</i> is the yield, in <i>E2</i>, of the unit of <i>T0</i>.

<p>
{Consider the following <b>serial-clause</b>:

<pre>
PROC samelson = (INT n, PROC (INT) REAL f) REAL:
   BEGIN LONG REAL s :=  LONG 0;
      FOR i TO n DO s +:= LENG f (i) &uarr; 2 OD;
      SHORTEN long sqrt (s)
   END;
y := samelson (m, (INT j) REAL: x1[j])
</pre>

<p>
In that context, the last <b>deprocedured-to-real-call</b> has the same effect as the <b>deprocedured-to-real-routine-text</b> in:

<pre>
y := REAL: (
   INT n = m, PROC (INT) REAL f = (INT j) REAL: x1[j];
   BEGIN LONG REAL s := LONG 0;
      FOR i TO n DO s +:= LENG f (i) &uarr; 2 OD;
      SHORTEN long sqrt (s)
   END).
</pre> 

<p>
The transmission of the <b>actual-parameters</b> is thus similar to the elaboration of <b>identity-declarations</b> 
 (<a href="report_2.html#442a">4.4.2.a</a>); see also establishment (<a href="report_2.html#322b">3.2.2.b</a>) and ascription 
 (<a href="report_2.html#482a">4.8.2.a</a>).}   

<p>
{ {Minor changes are required at other places in the Report.}}  

<p>
{ {The third bullet of <a href="report_2.html#5422">5.4.2.2</a> (semantics of formulas) is replaced by}}  
<br>
&bull; let <i>R1</i> be {the routine which is} the yield of the parametrization {<a href="report_appendix.html#E5432a2">5.4.3.2.a2</a>} of <i>R</i> with V<sub>1</sub>, ... , V<sub>n</sub>;  
<br>
&bull; <i>W</i> is the yield of the calling {<a href="report_appendix.html#E5432b">5.4.3.2.b</a>} of <i>R1</i> in <i>E1</i>;  

<p>
{ {<a href="report_2.html#5442cB">5.4.4.2.Case B</a>, <a href="report_5.html#A3412c">10.3.4.1.2.c</a> and <a href="report_5.html#A3492">10.3.4.9.2</a>  must be modified to show that the routines there created are composed, additionally, from a vacant locale {<a href="report_1.html#2111b">2.1.1.1.b</a>}.}} 

<!-- RRFooter -->
<p>
<div style="border: 1px solid red">
<table cellpadding=6>
<tr>
<td>
<p style="font-size: 8pt; font-color: black;">
Text from the <i>Revised Report on the Algorithmic
Language Algol 68</i> is reproduced under the condition specified in
that report: <i>Reproduction of the Report, for any purpose, but only
of the whole text, is explicitly permitted without formality</i>. The
appendix <i>Specification of partial parametrization proposal</i> is
not a part of the Algol 68 Revised Report, and is distributed with
Algol 68 Genie with kind permission of C.H. Lindsey.
<p style="font-size: 8pt; font-color: black;">
Copyright &copy; 2001-2008 J. Marcel van der Veer.<br>
Algol 68 Genie Mark 14.1 (November 2008)
</td>
</tr>
</table>
</div>
</body>
</html>

