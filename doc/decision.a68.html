<!-- Header -->
<html>
<head>
<title>Algol 68 Genie</title>
<meta name="Keywords" content="algol,algol68,68,algol-68,algol68g,algol68-g,a68g,a68-g,68g,genie,interpreter">
<meta http-equiv="Content-Style-Type" content="text/css"; charset=ISO-8859-1">
<style type="text/css">
a:link    {color: blue; text-decoration: underline;}
a:visited {color: blue; text-decoration: underline;}
a:active  {color: blue; text-decoration: underline;}
p {font-size: 10pt; font-family: Arial,Helvetica;}
u {font-size: 10pt; font-family: Arial,Helvetica;}
dd {font-size: 10pt; font-family: Arial,Helvetica;}
h1 {font-size: 16pt; font-family: Arial,Helvetica;}
h2 {font-size: 14pt; font-family: Arial,Helvetica;}
h3 {font-size: 12pt; font-family: Arial,Helvetica;}
h4 {font-size: 10pt; font-family: Arial,Helvetica;}
td {font-size: 10pt; font-family: Arial,Helvetica;}
ul {font-size: 10pt; font-family: Arial,Helvetica;}
body {font-size: 10pt; font-family: Arial,Helvetica;}
code {font-size: 10pt; font-family: Courier;}
pre {font-size: 10pt; font-family: Courier;}
</style>
</head>

<body bgcolor="white">

<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="100%" background="lines.gif">
<img src="lines.gif" align=right>
Documentation for Algol 68 Genie Mark 10.1
</td>
</table>


<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="50%" valign=top bgcolor="white">
<br>
<h2>Example: decision tree</h2>
</td>
<td width="30%" valign=top bgcolor="white">
<img src="logo.gif">
</td>
<td width="5%" valign=top bgcolor="white">
</td>
<td width="15%" valign=top bgcolor="white">
<!-- Navigation bar -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td background="lines.gif">
<b>Algol68G Mark 10.1</b>
<br>
&nbsp;&middot;&nbsp;<a href="introduction.html">Introduction</a><br>
&nbsp;&middot;&nbsp;<a href="install.html">Installation</a><br>
&nbsp;&middot;&nbsp;<a href="description.html">Description</a><br>
&nbsp;&middot;&nbsp;<a href="examples.html">Example&nbsp;programs</a><br>
&nbsp;&middot;&nbsp;<a href="synopsis.html">Synopsis</a><br>
&nbsp;&middot;&nbsp;<a href="syntax.html">Syntax</a><br>
&nbsp;&middot;&nbsp;<a href="environ.html">Environment</a><br>
<br>
<b>Extensions</b>
<br>
&nbsp;&middot;&nbsp;<a href="extensions.html">UNIX</a><br>
&nbsp;&middot;&nbsp;<a href="postgresql.html">PostgreSQL</a><br>
&nbsp;&middot;&nbsp;<a href="drawing.html">Drawing</a><br>
&nbsp;&middot;&nbsp;<a href="numerical.html">Numerical</a><br>
&nbsp;&middot;&nbsp;<a href="torrix.html">Linear algebra</a><br>
<br>
&nbsp;&middot;&nbsp;<a href="contents.html">Contents</a><br>
&nbsp;&middot;&nbsp;<a href="resources.html">A68 Resources</a><br>
&nbsp;&middot;&nbsp;<a href="introduction.html#obtaining">Downloads</a><br>
&nbsp;&middot;&nbsp;<a href="introduction.html#contact">Contact</a>
</td>
</tr>
</table>
<!-- End navigation bar -->
</td>
</table>

<pre>
CO Paradigm for building decision trees in Algol 68.
   We wrote programs like this for ALGOL68C on TOPS-20 and VM/CMS.
CO

BEGIN # Q&A game #

      CELL library := get answer("give an initial answer");
      
      DO guess object(library)
      UNTIL ~ put question("again")
      OD;

      # Data structure #

      MODE CELL = UNION (STRING, FORK), 
           FORK = STRUCT (STRING text, REF CELL has, hasnt);

      OP TEXT  = (FORK d) STRING: text OF d,
         HAS   = (FORK d) REF CELL: has OF d,
         HASNT = (FORK d) REF CELL: hasnt OF d;

      PROC new fork = (STRING text, CELL has, hasnt) FORK:
           (HEAP STRING := text, HEAP CELL := has, HEAP CELL := hasnt);

      # Guessing and extending library #

      PROC guess object = (REF CELL sub lib) VOID: # How to guess an object #
           CASE sub lib
           IN (STRING s): (put question(s) | ~ | sub lib := learn(s)),
              (FORK d):   guess object((put question(TEXT d) | HAS d | HASNT d))
           ESAC;

      PROC learn = (STRING guess) CELL: # Introduce new cell in tree #
           IF STRING answer = get answer("what is the answer"),
                     question = get answer("what distinguishes " + answer);
              put question("does " + question + " apply to " + answer)
           THEN new fork(question, answer, guess)
           ELSE new fork(question, guess, answer)
           FI;

      # Interaction #

      PROC get answer = (STRING prompt) STRING:
           BEGIN STRING s; 
                 printf(($gl$, prompt)); 
                 readf(($gl$, s)); 
                 s
           END;
                
      PROC put question = (STRING question) BOOL:
           IF STRING s = get answer(question);
              UPB s > 0
           THEN s[1] = "y" ORF s[1] = "Y"
           ELSE put question (question)
           FI;

      SKIP

END
</pre>

<!-- Footer -->
<hr color=#f0f0f0>
<p>
<small>
Copyright &copy; 2001-2006 J. Marcel van der Veer.<br>
Algol 68 Genie Mark 10.1 (December 2006)
</small>
</p>
<hr color=#f0f0f0>

</body>
</html>

