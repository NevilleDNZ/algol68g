<html>
<head>
<title>Algol 68 Genie - An Algol 68 interpreter</title>
<meta name="Keywords" content="algol,algol68,68,algol-68,algol68g,algol68-g,a68g,a68-g,68g,genie,interpreter">
<meta http-equiv="Content-Style-Type" content="text/css"; charset=ISO-8859-1">
<style type="text/css">
a:link    {color: blue; text-decoration: underline;}
a:visited {color: blue; text-decoration: underline;}
a:active  {color: blue; text-decoration: underline;}
p {font-size: 10pt; font-family: Arial,Helvetica;}
u {font-size: 10pt; font-family: Arial,Helvetica;}
dd {font-size: 10pt; font-family: Arial,Helvetica;}
h1 {font-size: 16pt; font-family: Arial,Helvetica;}
h2 {font-size: 14pt; font-family: Arial,Helvetica;}
h3 {font-size: 12pt; font-family: Arial,Helvetica;}
h4 {font-size: 10pt; font-family: Arial,Helvetica;}
td {font-size: 8pt; font-family: Arial,Helvetica;}
ul {font-size: 10pt; font-family: Arial,Helvetica;}
body {font-size: 10pt; font-family: Arial,Helvetica;}
code {font-size: 10pt; font-family: Courier;}
pre {font-size: 10pt; font-family: Courier;}
</style>
</head>

<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="100%" background="lines.gif">
<img src="lines.gif" align=right>
<small>Documentation for Algol 68 Genie Mark 9.2</small>
</td>
</table>

<body bgcolor="white">
<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="50%" valign=top bgcolor="white">
<br>
<h2>Drawing using the GNU Plotting Utilities</h2>
<small>
&nbsp;&middot;&nbsp;<a href="#drawsetup">Setting up a graphics device</a><br>
&nbsp;&middot;&nbsp;<a href="#drawcolour">Specifying colours</a><br>
&nbsp;&middot;&nbsp;<a href="#drawdraw">Drawing objects</a><br>
&nbsp;&middot;&nbsp;<a href="#drawtext">Drawing text</a><br>
&nbsp;&middot;&nbsp;<a href="#mandelbrot">Example: Mandelbrot set</a><br>
</small>
</td>
<td width="30%" bgcolor="white" valign=top align=center>
<img src="logo.gif">
</td>
<td width="5%" valign=top bgcolor="white">
</td>
<td width="15%" valign=top bgcolor="white">
<!-- Navigation bar -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td background="lines.gif">
<small><b>Algol68G Mark 9.2</b></small>
<br>
&nbsp;&middot;&nbsp;<a href="introduction.html"><small>Introduction</small></a><br>
&nbsp;&middot;&nbsp;<a href="install.html"><small>Installation</small></a><br>
&nbsp;&middot;&nbsp;<a href="description.html"><small>Description</small></a><br>
&nbsp;&middot;&nbsp;<a href="examples.html"><small>Example&nbsp;programs</small></a><br>
&nbsp;&middot;&nbsp;<a href="synopsis.html"><small>Synopsis</small></a><br>
&nbsp;&middot;&nbsp;<a href="syntax.html"><small>Syntax</small></a><br>
&nbsp;&middot;&nbsp;<a href="environ.html"><small>Environment</small></a><br>
<br>
<small><b>Extensions</b></small>
<br>
&nbsp;&middot;&nbsp;<a href="extensions.html"><small>UNIX</small></a><br>
&nbsp;&middot;&nbsp;<a href="postgresql.html"><small>PostgreSQL</small></a><br>
&nbsp;&middot;&nbsp;<a href="drawing.html"><small>Drawing</small></a><br>
&nbsp;&middot;&nbsp;<a href="numerical.html"><small>Numerical</small></a><br>
<br>
&nbsp;&middot;&nbsp;<a href="contents.html"><small>Contents</small></a><br>
&nbsp;&middot;&nbsp;<a href="resources.html"><small>A68 Resources</small></a><br>
&nbsp;&middot;&nbsp;<a href="introduction.html#obtaining"><small>Downloads</small></a><br>
&nbsp;&middot;&nbsp;<a href="introduction.html#contact"><small>Contact</small></a>
</td>
</tr>
</table>
<!-- End navigation bar -->
</td>
</table>

<p>On systems that have installed the <a href="http://www.gnu.org/software/plotutils/plotutils.html">GNU Plotting Utilities</a> (version 2.5 or compatible), Algol68G can be linked with that library to extend the standard prelude. This section contains a list of procedures supported by the current revision of Algol68G.
</p>
<p><a href="http://www.gnu.org/software/plotutils/plotutils.html">GNU Plotting Utilities</a> offer a number of routines for drawing. This allows for drawing in <code>X windows, postscript format</code>, <code>pseudo graphical interface format (pseudo-gif)</code> and <code>portable any-map format (pnm)</code> from Algol 68. Note that Algol68G is not a full Algol 68 binding for libplot.
</p>
<p>
A plotter (window, postscript file, etcetera) can be considered as a stream to which plotting commands are written. Therefore Algol68G considers plotters to be objects of mode <code>REF FILE</code>. This seems consistent with the design of Algol 68 transput since a file is associated with a channel that describes the device, and therefore can be considered as a description of a device driver.
</p>
<p>A plotter must be opened and closed, just like any file. To specify the file to be a drawing device, <code>stand draw channel</code> is declared in the standard environment, that yields <code>TRUE</code> when inspected by <code>draw possible</code>. To specify details on the plotter type and page size, the procedure <code>draw device</code> has to be called. A sample program is given below.
</p>
<p>
<table border=0 cellpadding=12>
<td>
<font color=black><pre>
# 'window' is an X window with 600x400 pixels #
FILE window;
draw device (window, "X", "600x400");
open (window, "Hello!", stand draw channel);
# 'draw erase' makes the window appear on the screen #
draw erase (window);
# Goto pixel 0.25x600, 0.5x400 #
draw move (window, 0.25, 0.5);
# Colour will be 100% red, 0% green, 0% blue #
draw colour (window, 1, 0, 0);
# Write an aligned text #
draw text (window, "c", "c", "Hello world!");
# Flush the drawing command buffer - 
  only needed for real-time plotters like X #
draw show (window);
# Give audience a chance to read the message #
VOID (read char);
# Make the window disappear from the screen #
close (window);
</pre></font>
</td>
</table>

<p>Implemented drawing routines are part of the standard environment.
</p>

<br>
<h3><a name="drawsetup"></a>Setting up a graphics device</h3>
<p>
<dl>
<dt><code>PROC draw device = (REF FILE file, STRING type, STRING params) VOID</code>
<dt><code>PROC make device = (REF FILE file, STRING type, STRING params) BOOL</code>
<dd>Sets parameters for plotter <code>file</code>. Parameter <code>type</code> sets the plotter type. Algol68G supports <code>"X"</code> for <code>X Window System</code>, <code>"ps"</code> for <code>postscript, "gif"</code> for <code>pseudo graphical interface format</code> and <code>pnm</code> for <code>portable any-map format</code>. <code>X</code> plotters write graphics to an <code>X</code> Window System display rather than to an output stream. Error messages from libplot are written to the Algol68G log file. A runtime error results if the plotter could not be opened. Argument <code>params</code> is interpreted as an image size. For <code>X, gif</code> and <code>pnm</code> the syntax reads "<code>x pixels</code> x <code>y pixels</code>", for instance "<code>500</code>x<code>500</code>". For <code>postscript</code>, image size is the size of the page on which the graphics display will be positioned. Any ISO page size in the range "a0" - "a4" or ANSI page size in the range "a" - "e" may be specified. Recognised aliases are "letter" for "a" and "tabloid" for "b". Other valid page sizes are "legal", "ledger", and "b5". The graphics display will be a square region centred on the specified page and occupying its full width, with allowance being made for margins.
<br>
<br>
This routine returns <code>TRUE</code> if it succeeds.
<br>
<br>
<dt><code>PROC draw erase = (REF FILE file) VOID</code>
<dd>Begins the next frame of a multiframe page, by clearing all previously plotted objects from the graphics display, and filling it with the background colour (if any).
<br>
<br>
<dt><code>PROC draw show = (REF FILE file) VOID</code>
<dd>Flushes all pending plotting commands to the display device. This is useful only if the currently selected plotter does real-time plotting, since it may be used to ensure that all previously plotted objects have been sent to the display and are visible to the user. It has no effect on plotters that do not do real-time plotting.
<br>
<br>
<dt><code>PROC draw move = (REF FILE file, REAL x, y) VOID</code>
<dd>The arguments specify the co-ordinates (<code>x</code>, y</code>). The graphics cursor is moved to (<code>x, y</code>). The values of <code>x</code> and <code>y</code> are fractions 0 .. 1 of the page size in respectively the <code>x</code> and <code>y</code> directions.
<br>
<br>
<dt><code>PROC draw aspect = (REF FILE file) REAL</code>
<dd>Yields the aspect ratio (<code>y size</code> / <code>x size</code>).
<br>
<br>
<dt><code>PROC draw fill style = (REF FILE file, INT level) VOID</code>
<dd>Sets the fill fraction for all subsequently drawn objects. A value of <code>level</code> = 0 indicates that objects should be unfilled, or transparent. This is the default. A value in the range <code>16r0001</code> .. <code>16rffff</code>, indicates that objects should be filled. A value of 1 signifies 100% filling; the fill colour will be the colour specified by calling <code>draw colour</code>. If <code>level</code> = <code>16rffff</code>, the fill colour will be white. Values <code>16r0002</code> .. <code>16rfffe</code> represent a proportional saturation level, for instance <code>16r8000</code> denotes 50%.
<br>
<br>
<dt><code>PROC draw linestyle = (REF FILE file, [] CHAR style) VOID</code>
<dd>Sets the line style for all lines subsequently drawn on the graphics display. The supported line styles are "solid", "dotted", "dotdashed", "shortdashed", "longdashed", "dotdotdashed", "dotdotdotdashed", and "disconnected". The first seven correspond to the following dash patterns:
<font color=black><pre>
<code>
"solid" 	  --------------------------------
"dotted"	  - - - - - - - -
"dotdashed"       ---- - ---- - ---- -
"shortdashed"     ---- ---- ---- ----
"longdashed"      ------- ------- -------
"dotdotdashed"    ---- - - ---- - -
"dotdotdotdashed" ---- - - - ---- - - -
</code>
</pre></font>
In the preceding patterns, each hyphen stands for one line thickness. This is the case for sufficiently thick lines, at least. So for sufficiently thick lines, the distance over which a dash pattern repeats is scaled proportionately to the line thickness. The "disconnected" line style is special. A "disconnected" path is rendered as a set of filled circles, each of which has diameter equal to the nominal line thickness. One of these circles is centred on each of the juncture points of the path (i.e., the endpoints of the line segments or arcs from which it is constructed). Circles with "disconnected" line style are invisible. Disconnected circles are not filled. All line styles are supported by all plotters.
<br>
<br>
<dt><code>PROC draw linewidth = (REF FILE file, REAL thickness) VOID</code>
<dd>Sets the thickness of all lines subsequently drawn on the graphics display. The value of <code>thickness</code> is a fraction 0 .. 1 of the page size in the <code>y</code> direction. A negative value resets the thickness to the default. For plotters that produce bitmaps, i.e., X plotters, and pnm plotters, it is zero. By convention, a zero-thickness line is the thinnest line that can be drawn.
</dl>

<br>
<h3><a name="drawcolour"></a>Specifying colours</h3>
<p>
<dl>
<dt><code>PROC draw background colour = (REF FILE file, REAL red, green, blue) VOID</code>
<br><code>PROC draw background color = (REF FILE file, REAL red, green, blue) VOID</code>
<dd>Sets the background colour for plotter <code>file</code>'s graphics display, using fractional intensities in a 48-bit RGB colour model. The arguments <code>red, green</code> and <code>blue</code> specify the red, green and blue intensities of the background colour. Each is a real value in the range 0 .. 1. The choice (0, 0, 0) signifies black, and the choice (1, 1, 1) signifies white. This procedure affects only plotters that produce bitmaps, i. e. , X plotters and pnm plotters. Its effect is that when the draw erase procedure is called for this plotter, its display will be filled with the specified colour.
<br>
<br>
<dt><code>PROC draw background colour name = (REF FILE file, STRING name) VOID</code>
<br><code>PROC draw background color name = (REF FILE file, STRING name) VOID</code>
<dd>Sets the background colour for plotter <code>file</code>'s graphics display. Argument <code>name</code> is a case insensitive string. Accepted names are essentially those supported by recent revisions of the <code>X</code> Window System. Its effect is that when the draw erase procedure is called for this plotter, its display will be filled with the specified colour.
<br>
<br>
<dt><code>PROC draw colour = (REF FILE file, REAL red, green, blue) VOID</code>
<br><code>PROC draw color = (REF FILE file, REAL red, green, blue) VOID</code>
<dd>Sets the foreground colour for plotter <code>file</code>'s graphics display, using fractional intensities in a 48-bit RGB colour model. The arguments <code>red, green</code> and <code>blue</code> specify the red, green and blue intensities of the foreground colour. Each is a real value in the range 0 .. 1. The choice (0, 0, 0) signifies black, and the choice (1, 1, 1) signifies white.
<br>
<br>
<dt><code>PROC draw colour name = (REF FILE file, STRING name) VOID</code>
<br><code>PROC draw color name = (REF FILE file, STRING name) VOID</code>
<dd>Sets the foreground colour for plotter <code>file</code>'s graphics display. Argument <code>name</code> is a case insensitive string. Accepted names are essentially those supported by recent revisions of the <code>X</code> Window System.
</dl>

<br>
<h3><a name="drawdraw"></a>Drawing objects</h3>
<dl>
<dt><code>PROC draw point = (REF FILE file, REAL x, y) VOID</code>
<dd>The arguments specify the co-ordinates (<code>x, y</code>) of a point that will be drawn. The graphics cursor is moved to (<code>x, y</code>). The values of <code>x</code> and <code>y</code> are fractions 0 .. 1 of the page size in respectively the <code>x</code> and <code>y</code> directions.
<br>
<br>
<dt><code>PROC draw line = (REF FILE file, REAL x, y) VOID</code>
<dd>The arguments specify the co-ordinates (<code>x, y</code>) of a line that will be drawn starting from the current graphics cursor. The graphics cursor is moved to (<code>x, y</code>). The values of <code>x</code> and <code>y</code> are fractions 0 .. 1 of
the page size in respectively the <code>x</code> and <code>y</code> directions.
<br>
<br>
<dt><code>PROC draw rect = (REF FILE file, REAL x, y) VOID</code>
<dd>The arguments specify the corner co-ordinates (<code>x, y</code>) of a rectangle that will be drawn starting from the diagonally opposing corner represented by the current graphics cursor. The graphics cursor is moved to (<code>x, y</code>). The values of <code>x</code> and <code>y</code> are fractions 0 .. 1 of the page size in respectively the <code>x</code> and <code>y</code> directions.
<br>
<br>
<dt><code>PROC draw circle = (REF FILE file, REAL x, y, r) VOID</code>
<dd>The three arguments specifying the centre (<code>x, y</code>) and radius <code>r</code> of a circle, and the circle is drawn. The graphics cursor is moved to (<code>x, y</code>). The values of <code>x</code> and <code>y</code> are fractions 0 .. 1 of the page size in respectively the <code>x</code> and <code>y</code> directions. The value of <code>r</code> is a fraction 0 .. 1 of the page size in the <code>y</code> direction.
</dl>

<br>
<h3><a name="drawtext"></a>Drawing text</h3>
<dl>
<dt><code>PROC draw text = (REF FILE file, CHAR horiz_justify,
vert_justify, [] CHAR s) VOID</code>
<dd>The justified string <code>s</code> is drawn according to the specified justifications. If <code>horiz_justify</code> is equal to <code>"l", "c"</code>, or <code>"r"</code>, then the string will be drawn with left, centre or right justification, relative to the current graphics cursor position. If <code>vert_justify</code> is equal to <code>"b", "x", "c"</code>, or <code>"t"</code>, then the bottom, baseline, centre or top of the string will be placed even with the current graphics cursor position. The graphics cursor is moved to the right end of the string if left justification is specified, and to the left end if right justification is specified. The string may contain escape sequences of various sorts (see section <code>Text string format and escape sequences</code> in the <a href="http://www.gnu.org/software/plotutils/plotutils.html">plotutils manual</a>), though it should not contain line feeds or carriage returns; in fact it should include only printable characters. The string may be plotted at a nonzero angle, if <code>draw textangle</code> has been called.
<br>
<br>
<dt><code>PROC draw text angle = (REF FILE file, INT angle) VOID</code>
<dd>Argument <code>angle</code> specifies the angle in degrees counter clockwise from the <EM>x</EM> (horizontal) axis in the user co-ordinate system, for text strings subsequently drawn on the graphics display. The default angle is zero. The font for plotting strings is fully specified by calling <code>draw font name</code>, <code>draw font size</code>, and <code>draw text angle</code>.
<br>
<br>
<dt><code>PROC draw font name = (REF FILE file, [] CHAR name) VOID</code>
<dd>The case-insensitive string <code>name</code> specifies the name of the font to be used for all text strings subsequently drawn on the graphics display. The font for plotting strings is fully specified by calling <code>draw font name</code>, <code>draw font size</code>, and <code>draw text angle</code>. The default font name depends on the type of plotter. It is "Helvetica" for X plotters, for pnm it is "HersheySerif". If the argument <code>name</code> is NIL or an empty string, or the font is not available, the default font name will be used. Which fonts are available also depends on the type of plotter; for a list of all available fonts, see section <code>Available text fonts</code> in the <a href="http://www.gnu.org/software/plotutils/plotutils.html">plotutils manual</a>.
<br>
<br>
<dt><code>PROC draw font size = (REF FILE file, INT size) VOID</code>
<dd>Argument <code>size</code> is interpreted as the size, in the user co-ordinate system, of the font to be used for all text strings subsequently drawn on the graphics display. A negative value for <code>size</code> sets the size to the default, which depends on the type of plotter. Typically, the default font size is 1/50 times the size (i. e. , minimum dimension) of the display. The font for plotting strings is fully specified by calling <code>draw font name</code>, <code>draw font size</code>, and <code>draw text angle</code>.
</dl>

<br>
<h3><a name="mandelbrot"></a>Example: Mandelbrot set</h3>
<p>
This example program can be found <a href="mandelbrot.a68.html">here</a>.

<p>
<br>
<table width="100%" border=0 cellspacing=0 cellpadding=0>
<td width="50%" valign=top bgcolor="white">
<font color="black">
<small>Copyright &copy; 2001-2006 J. Marcel van der Veer.</small>
</font>
</td>
<td width="50%" align=right valign=top bgcolor="white">
<font color="black">
<small>Documentation for Algol 68 Genie Mark 9.2 (July 2006)</small>
</font>
</td>
</table>
</p>

</body>
</html>
